import { errorHandles } from "../utils/errorHandler.js"

const domains = [
    ".com",
    ".org",
    ".net",
    ".info",
    ".biz",
    ".name",
    ".pro",
    ".edu",
    ".gov",
    ".mil",
    ".int",
    ".mobi",
    ".aero",
    ".asia",
    ".cat",
    ".coop",
    ".jobs",
    ".museum",
    ".post",
    ".tel",
    ".travel",
    ".xxx",
    ".academy",
    ".accountant",
    ".contadores",
    ".actor",
    ".agency",
    ".airforce",
    ".amsterdam",
    ".apartments",
    ".app",
    ".archi",
    ".army",
    ".art",
    ".associates",
    ".attorney",
    ".auction",
    ".audio",
    ".baby",
    ".band",
    ".bar",
    ".bargains",
    ".beer",
    ".best",
    ".bid",
    ".bike",
    ".bingo",
    ".bio",
    ".black",
    ".blog",
    ".blue",
    ".boo",
    ".boutique",
    ".builders",
    ".business",
    ".buzz",
    ".cab",
    ".cafe",
    ".camera",
    ".camp",
    ".capetown",
    ".capital",
    ".cards",
    ".care",
    ".careers",
    ".casa",
    ".cash",
    ".casino",
    ".catering",
    ".center",
    ".ceo",
    ".charity",
    ".chat",
    ".cheap",
    ".church",
    ".city",
    ".claims",
    ".cleaning",
    ".clinic",
    ".clothing",
    ".cloud",
    ".club",
    ".coach",
    ".codes",
    ".coffee",
    ".community",
    ".company",
    ".computer",
    ".condos",
    ".construction",
    ".consulting",
    ".contacto",
    ".contractors",
    ".cooking",
    ".cool",
    ".country",
    ".coupons",
    ".courses",
    ".crÃ©dito",
    ".creditcard",
    ".cricket",
    ".cruises",
    ".dad",
    ".dance",
    ".date",
    ".dating",
    ".day",
    ".deals",
    ".degree",
    ".delivery",
    ".democrat",
    ".dental",
    ".dentist",
    ".design",
    ".dev",
    ".diamonds",
    ".digital",
    ".direct",
    ".directory",
    ".discount",
    ".doctor",
    ".dog",
    ".domains",
    ".download",
    ".durban",
    ".earth",
    ".eco",
    ".education",
    ".energy",
    ".engineer",
    ".engineering",
    ".enterprises",
    ".equipment",
    ".esq",
    ".estate",
    ".events",
    ".exchange",
    ".expert",
    ".exposed",
    ".express",
    ".fail",
    ".faith",
    ".family",
    ".fan",
    ".fans",
    ".farm",
    ".fashion",
    ".finance",
    ".financial",
    ".fish",
    ".fishing",
    ".fit",
    ".fitness",
    ".flights",
    ".florist",
    ".foo",
    ".football",
    ".forsale",
    ".foundation",
    ".fun",
    ".fund",
    ".furniture",
    ".futbol",
    ".fyi",
    ".gallery",
    ".games",
    ".gay",
    ".gifts",
    ".gives",
    ".glass",
    ".gmbh",
    ".gold",
    ".golf",
    ".graphics",
    ".gratis",
    ".green",
    ".gripe",
    ".group",
    ".guide",
    ".guru",
    ".hair",
    ".haus",
    ".health",
    ".healthcare",
    ".hockey",
    ".holdings",
    ".holiday",
    ".homes",
    ".horse",
    ".hospital",
    ".host",
    ".house",
    ".how",
    ".hn",
    ".hr",
    ".ht",
    ".hu",
    ".id",
    ".ie",
    ".il",
    ".im",
    ".in",
    ".io",
    ".iq",
    ".ir",
    ".is",
    ".it",
    ".je",
    ".jm",
    ".jo",
    ".jp",
    ".ke",
    ".kg",
    ".kh",
    ".ki",
    ".km",
    ".kn",
    ".kp",
    ".kr",
    ".kw",
    ".ky",
    ".kz",
    ".la",
    ".lb",
    ".lc",
    ".li",
    ".lk",
    ".lr",
    ".ls",
    ".lt",
    ".lu",
    ".lv",
    ".ly",
    ".ma",
    ".mc",
    ".md",
    ".me",
    ".mg",
    ".mh",
    ".mk",
    ".ml",
    ".mm",
    ".mn",
    ".mo",
    ".mp",
    ".mq",
    ".mr",
    ".ms",
    ".mt",
    ".mu",
    ".mv",
    ".mw",
    ".mx",
    ".my",
    ".mz",
    ".na",
    ".nc",
    ".ne",
    ".nf",
    ".ng",
    ".ni",
    ".nl",
    ".no",
    ".np",
    ".nr",
    ".nu",
    ".nz",
    ".om",
    ".pa",
    ".pe",
    ".pf",
    ".pg",
    ".ph",
    ".pk",
    ".pl",
    ".pm",
    ".pn",
    ".pr",
    ".ps",
    ".pt",
    ".pw",
    ".py",
    ".qa",
    ".re",
    ".ro",
    ".rs",
    ".ru",
    ".rw",
    ".sa",
    ".sb",
    ".sc",
    ".sd",
    ".se",
    ".sg",
    ".sh",
    ".si",
    ".sk",
    ".sl",
    ".sm",
    ".sn",
    ".so",
    ".sr",
    ".st",
    ".su",
    ".sv",
    ".sx",
    ".sy",
    ".sz",
    ".tc",
    ".td",
    ".tf",
    ".tg",
    ".th",
    ".tj",
    ".tk",
    ".tl",
    ".tm",
    ".tn",
    ".to",
    ".tr",
    ".tt",
    ".tv",
    ".tz",
    ".ua",
    ".ug",
    ".uk",
    ".us",
    ".uy",
    ".uz",
    ".va",
    ".vc",
    ".ve",
    ".vg",
    ".vi",
    ".vn",
    ".vu",
    ".wf",
    ".ws",
    ".ye",
    ".yt",
    ".za",
    ".zm",
    ".zw"
]

const validateURL = (url: string) => {
    if (!url) throw Error('Invalida URL provider.')
    if (!/^https?:\/\//i.test(url)) return false;
    const dominio = url.match(/^(?:https?:\/\/)?(?:www\.)?([^\/?#]+)/i)?.[1] || "";

    const extensionDominio = dominio.includes('.')
        ? '.' + dominio.split('.').pop()
        : "";
    if (domains.includes(extensionDominio)) return true
    return false
}

export const safeValidateURL = errorHandles(validateURL);
